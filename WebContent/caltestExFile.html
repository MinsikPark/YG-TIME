<!DOCTYPE html>
<html lang="en">
<head>
<title>Bootstrap Example</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="fullcalendar/fullcalendar.css" />

<link  href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet"/>
<script src="fullcalendar/lib/jquery.min.js"></script>
<script src="fullcalendar/lib/moment.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="fullcalendar/fullcalendar.js"></script>
<script>
$(document).ready(function(){
   $('#calendar').fullCalendar({
        header: {
          left: '',
          center: 'title',
          right: 'today prev,next'
        },
        defaultView: 'month',
        defaultDate: '2018-04-10',
        eventLimit: 3,
            eventLimitText: "더보기",
            eventLimitClick: "popover",
            editable: false,
            droppable: false,
            height: "parent",
            eventSources: "2018-04-10"
      });
      $(".fc-prev-button").on("click", function() {
        //alert("!!!");
        getViewDate();
      });
      $(".fc-next-button").on("click", function() {
        //alert("next!!!");
        getViewDate();
      });
      $(".fc-today-button").on("click", function() {
        //alert("next!!!");
        getViewDate();
      });
       
      function renderCalcEvent(data) {
        for (var i = 0; i < data.length; i++) {
          var locIdx = data[i].locationIdx;
          var eventIdx = data[i].eventIdx;
          var sdate = new Date(data[i].regDt).toString();
          var edate = new Date(data[i].regDt).toString();
          var col = "blue";
          var date = data[i].regDt;
       
          var event = {
            id: data[i].eventIdx,
            title: data[i].locationName,
            url: '/',
            start: moment(data[i].regDt),
            allDay: false,
            color: col
          };
       
          $('#calendar').fullCalendar('renderEvent', event);
        }
      }
      
      function calEvent(dayObj, locationIdx) {
           url = "/";
           $.ajax({
             dataType: "json",
             data: dayObj,
             method: "POST",
             url: url,
             async: false,
             success: function(data) {
               if (data.state == "success") {
                 renderCalcEvent(data.calEvent);
               }
             },
             error: function(request, status, error) {
               alert("code:" + request.status + "\n" + "message:" +
                 request.responseText + "\n" + "error:" +
                 error);
             }
           });
         }
          
         function getViewDate() {
           var date = $('#calendar').fullCalendar('getView');
           console.log(date.intervalStart.format('YYYY-MM-DD'));
           console.log(date.intervalEnd.subtract(1, "days").format('YYYY-MM-DD'));
           var monthObj = {
             startDate: date.intervalStart.format('YYYY-MM-DD'),
             endDate: date.intervalEnd.subtract(1, "days").format('YYYY-MM-DD')
           };
           $('#calendar').fullCalendar('removeEvents');
           calEvent(monthObj, '');
         }
});
</script>
 
</head>
<body>

<div id='calendar'></div>

</body>
</html>